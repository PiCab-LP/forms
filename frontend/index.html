<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wysaro - Social Networks & Details</title>
    <link rel="icon" type="image/x-icon" href="./imgs/wysaro-isologo-black.png">
    <link rel="stylesheet" href="css/styles.css">
    
    <style>
        /* üî• ESTILOS PARA EL PLACEHOLDER Y EL CONTADOR */
        #roomDetails::placeholder {
            color: #b0b0b0; /* Gris claro para que no compita con la descripci√≥n */
            font-size: 13.5px; /* Un poco m√°s peque√±o */
            font-weight: 400;
        }
        .char-counter {
            font-size: 12px;
            color: #888;
            text-align: right;
            margin-top: 6px;
            font-family: sans-serif;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="logo-container">
            <img src="assets/images/wysaro-isologo-black.png" alt="Wysaro Gaming" class="logo">
        </div>
        
        <div class="progress-bar">
            <div class="progress" style="width: 50%;"></div>
        </div>
        
        <form id="formPage1">
            <h1 class="main-title">
                Welcome to Wysaro, <span class="editable-company" id="companyName" contenteditable="true">Company Name</span>!
            </h1>
            
            <h2>Social Networks</h2>
            <p class="subtitle">Let's start by filling out all your social networks</p>
            
            <div class="form-group">
                <label for="facebook">Facebook</label>
                <input type="url" id="facebook" name="facebook" placeholder="https://facebook.com/yourpage">
            </div>
            
            <div class="form-group">
                <label for="instagram">Instagram</label>
                <input type="url" id="instagram" name="instagram" placeholder="https://instagram.com/yourpage">
            </div>
            
            <div class="form-group">
                <label for="twitter">X (Twitter)</label>
                <input type="url" id="twitter" name="twitter" placeholder="https://x.com/yourpage">
            </div>
            
            <div class="form-group">
                <label for="other">Other</label>
                <input type="url" id="other" name="other" placeholder="https://yourwebsite.com">
            </div>
            
            <div id="socialNetworkError" class="error-message" style="display: none;">
                ‚ö†Ô∏è Please complete at least one social network to continue
            </div>

            <div style="margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px;">
                <h2 style="text-align: center;">Details Room</h2>
                <p class="subtitle" style="margin-bottom: 15px; text-align: center;">
                    Does your gameroom have rules regarding cashouts, cashout schedules, or bonuses that we should be aware of? Any details we should know to provide your customers with a complete experience?
                </p>
                <div class="form-group">
                    <textarea 
                        id="roomDetails" 
                        name="roomDetails" 
                        maxlength="500"
                        oninput="document.getElementById('roomDetailsCount').textContent = this.value.length + ' / 500'"
                        placeholder="Let us know everything so we can give your customers a complete experience..."
                        style="width: 100%; height: 120px; padding: 15px; border-radius: 8px; border: 1px solid #ccc; font-family: inherit; font-size: 15px; resize: vertical; box-sizing: border-box; color: #333;"
                    ></textarea>
                    <div class="char-counter" id="roomDetailsCount">0 / 500</div>
                </div>
            </div>
            <div class="form-actions" style="margin-top: 30px;">
                <button type="button" class="btn-next" id="btnNext">Next ‚Üí</button>
            </div>
        </form>
    </div>
    
    <script src="js/form-handler.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/navigation.js"></script>

<script>
    // Cargar nombre del gameroom al cargar la p√°gina
    window.addEventListener('DOMContentLoaded', () => {
        // üî• Si hay token en URL, NO verificar localStorage (modo edici√≥n)
        const urlParams = new URLSearchParams(window.location.search);
        const hasToken = urlParams.get('token');
        
        if (hasToken) {
            console.log('‚úÖ Token detectado, omitiendo verificaci√≥n de gameroomName');
            return;
        }
        
        const gameroomName = localStorage.getItem('gameroomName');
        
        // Si no hay nombre y NO hay token, redirigir a welcome
        if (!gameroomName) {
            window.location.href = 'welcome.html';
            return;
        }
        
        // Actualizar el t√≠tulo con el nombre
        const companyNameElement = document.getElementById('companyName');
        if (companyNameElement) {
            companyNameElement.textContent = gameroomName;
            
            // DESHABILITAR la edici√≥n
            companyNameElement.contentEditable = 'false';
            companyNameElement.style.cursor = 'default';
            companyNameElement.style.borderBottom = 'none';
        }

        // üî• EXTRA: Actualizar el contador si el usuario recarga la p√°gina o viene de regreso ("Back")
        setTimeout(() => {
            const roomDetailsEl = document.getElementById('roomDetails');
            if (roomDetailsEl && roomDetailsEl.value) {
                document.getElementById('roomDetailsCount').textContent = roomDetailsEl.value.length + ' / 500';
            }
        }, 100);
    });
</script>

</body>
</html>